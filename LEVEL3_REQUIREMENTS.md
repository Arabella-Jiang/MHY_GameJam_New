# Level 3: 星之闪耀【雪】- 需求文档

## 1. 关卡概述

### 1.1 基本信息
- **关卡名称**: 星之闪耀【雪】 (Star's Radiance [Snow])
- **关卡主题**: 复活、星光、雪山环境、哲学思考
- **核心目标**: 复活枯死的植物，将天上的星光转移到可接触的平面，激活石碑
- **关卡环境**: 雪山地带，夜晚场景
- **玩家进入方式**: 
  - 从Level2完成后继续前进到雪山地带
  - 或从上一场景结束后直接传送到雪山

### 1.2 核心组件
- **生（Life）组件**: 通过复活植物获得
- **星点（Star Point）组件**: 通过反射星光获得
- **石碑**: 需要"生"和"星点"两个组件才能激活

## 2. UI文本

### 2.1 初始UI文本
- **显示时机**: 关卡开始时
- **文本内容**: "春,多么充满希望的字。万物复苏,草木葳蕤,知春便知世界的律动。"
- **显示位置**: 屏幕中央或指定UI区域

### 2.2 最终UI文本
- **显示时机**: 石碑激活后
- **文本内容**: "星星,照应我们所处的位置在宇宙的何方,知道脚下在哪里,才明白未来何去何从。"
- **显示位置**: 屏幕中央或指定UI区域

### 2.3 交互提示UI
- **显示时机**: 玩家靠近可交互物体时
- **提示内容**: "该物体有多种特性,请选择一种最符合需求的并继续探索吧"
- **显示方式**: 类似信号的交互UI

## 3. 镜头设计

### 3.1 开场镜头
1. **石碑镜头**: 镜头给到石碑，并停留在石碑上，显示甲骨文"星"的字样
2. **环境镜头**: 镜头给到天上的星星以及枯死的植物
3. **可交互物体镜头**: 镜头给到可交互的物体（石头、雪、冰锥）
4. **玩家视角**: 镜头回到玩家身后，持续给到枯死的植物光源

### 3.2 过场动画
- **植物复活过场**: 当植物被水浇灌复活时播放
- **石碑激活过场**: 当石碑被点亮时播放
- **天空变亮过场**: 当石碑激活后，星星变亮时播放

## 4. 可交互物体及属性

### 4.1 石头 (Stone)
- **属性1**: 重 (Heavy)
- **属性2**: 硬 (Hard)
- **可理解**: 是
- **可拾取**: 是（可选）

### 4.2 雪 (Snow)
- **属性1**: 凉 (Cool)
- **属性2**: 白 (White)
- **可理解**: 是
- **可拾取**: 否

### 4.3 冰锥 (Ice Cone)
- **属性1**: 硬 (Hard)
- **属性2**: 透 (Transparent)
- **属性3**: 尖 (Sharp)
- **可理解**: 是
- **可拾取**: 是

### 4.4 枯死的植物 (Dead Plants)
- **状态**: 枯死
- **可理解**: 否
- **可拾取**: 否
- **特殊**: 需要水来复活
- **视觉效果**: 周围可以环绕一两只萤火虫，提供光源

### 4.5 结冰的湖面 (Frozen Lake Surface)
- **状态**: 结冰
- **可理解**: 否
- **可拾取**: 否
- **特殊**: 可以被凿开

### 4.6 冰面 (Ice Surface)
- **状态**: 固态
- **可理解**: 否
- **可拾取**: 否
- **特殊**: 可以被压裂

### 4.7 石碑 (Stone Tablet)
- **状态**: 未激活（需要"生"和"星点"组件）
- **可理解**: 否
- **可拾取**: 否
- **特殊**: 
  - 显示甲骨文"星"字
  - 获得组件后能量会汇聚到石碑上，点亮部分字体
  - 完全激活后会点亮，触发过场动画

## 5. 获得"生"组件的路径

### 5.1 路径1: 石头（硬）+ 冰锥
- **步骤1**: 玩家理解石头的"硬"属性
- **步骤2**: 玩家将"硬"属性赋予冰锥
- **步骤3**: 使用冰锥凿开结冰的湖面
- **步骤4**: 获得湖水
- **步骤5**: 用湖水浇灌枯死的植物
- **步骤6**: 植物复苏，获得"生"组件
- **触发**: 播放植物复苏过场动画

### 5.2 路径2: 石头（重）+ 自身 + 冰面
- **步骤1**: 玩家理解石头的"重"属性
- **步骤2**: 玩家将"重"属性赋予自身（自我赋能）
- **步骤3**: 玩家变重，站在冰面上
- **步骤4**: 冰面开裂
- **步骤5**: 获得湖水
- **步骤6**: 用湖水浇灌枯死的植物
- **步骤7**: 植物复苏，获得"生"组件
- **触发**: 播放植物复苏过场动画

### 5.3 路径3: 打磨冰锥获得凸透镜
- **步骤1**: 玩家打磨冰锥（可能需要特定操作）
- **步骤2**: 冰锥变成凸透镜
- **步骤3**: 使用凸透镜汇聚阳光（或星光）
- **步骤4**: 冰雪融化
- **步骤5**: 获得水
- **步骤6**: 用水浇灌枯死的植物
- **步骤7**: 植物复苏，获得"生"组件
- **触发**: 播放植物复苏过场动画

## 6. 获得"星点"组件的路径

### 6.1 路径1: 石头（硬）+ 冰锥（透）+ 雪
- **步骤1**: 玩家理解石头的"硬"属性
- **步骤2**: 玩家理解冰锥的"透"属性
- **步骤3**: 玩家同时将"硬"和"透"属性赋予雪面
- **步骤4**: 雪面呈现镜面质感
- **步骤5**: 雪面获得反射星光的能力
- **步骤6**: 获取"星点"组件

### 6.2 路径2: 将"透"赋予大块石头
- **步骤1**: 玩家理解冰锥的"透"属性（或其他物体的"透"属性）
- **步骤2**: 玩家将"透"属性赋予大块石头
- **步骤3**: 石头可以映射出星光
- **步骤4**: 获取"星点"组件

## 7. 关卡完成流程

### 7.1 前置条件
- 玩家已获得"生"组件
- 玩家已获得"星点"组件

### 7.2 完成步骤
1. **组件充能**: 玩家与石碑交互，将"生"和"星点"组件充能到石碑
   - 获得一个组件时，能量就汇聚到石碑上，点亮一部分字体
   - 两个组件都获得后，石碑完全点亮
2. **石碑激活**: 石碑点亮，触发过场动画
3. **天空变亮**: 天空的星星更加明亮（过场动画）
4. **显示最终UI**: 显示最终UI文本
5. **关卡完成**: 可以进入下一关或返回主菜单

## 8. 视觉效果需求

### 8.1 萤火虫效果
- **用途**: 照亮可交互物体，让玩家注意到
- **位置**: 
  - 枯死的植物周围（1-2只）
  - 可交互物体周围（石头、雪、冰锥）
- **行为**: 环绕物体飞行，提供光源

### 8.2 植物复苏效果
- **触发**: 当植物被水浇灌时
- **效果**: 
  - 植物从枯死状态变为生机勃勃
  - 播放过场动画
  - 可能伴随粒子效果

### 8.3 星光反射效果
- **触发**: 当创建了反射表面（镜面雪面或透明石头）时
- **效果**: 
  - 显示星光反射在地面上的投影
  - "星点"组件被收集

### 8.4 石碑激活效果
- **触发**: 当"生"和"星点"组件都充能到石碑时
- **效果**: 
  - 石碑逐渐点亮
  - 甲骨文"星"字发光
  - 播放过场动画

### 8.5 天空变亮效果
- **触发**: 石碑激活后
- **效果**: 
  - 天空中的星星变得更加明亮
  - 播放过场动画
  - 整体场景亮度可能略微提升

## 9. 技术实现需求

### 9.1 新特性枚举
需要在 `ObjectProperty.cs` 中添加：
```csharp
Heavy,      // 重（从石头理解）
Cool,       // 凉（从雪理解）
White,      // 白（从雪理解）
Transparent,// 透（从冰锥理解）
Sharp,      // 尖（从冰锥理解）
```

### 9.2 新组合效果组件

#### 9.2.1 IceConeHardEffect
- **触发条件**: 冰锥 + Hard属性
- **效果**: 冰锥可以凿开结冰的湖面
- **结果**: 玩家可以获得湖水

#### 9.2.2 PlayerHeavyEffect
- **触发条件**: 玩家自身 + Heavy属性
- **效果**: 玩家变重，可以压裂冰面
- **结果**: 玩家可以获得湖水
- **实现**: 可能需要修改PlayerMovement的重力或质量

#### 9.2.3 IceConeLensEffect
- **触发条件**: 冰锥被打磨（可能需要特定操作）
- **效果**: 冰锥变成凸透镜，汇聚光线
- **结果**: 冰雪融化，获得水

#### 9.2.4 SnowMirrorEffect
- **触发条件**: 雪面 + Hard属性 + Transparent属性
- **效果**: 雪面变成镜面，可以反射星光
- **结果**: 玩家获得"星点"组件

#### 9.2.5 StoneTransparentEffect
- **触发条件**: 大块石头 + Transparent属性
- **效果**: 石头可以映射出星光
- **结果**: 玩家获得"星点"组件

#### 9.2.6 PlantRevivalEffect
- **触发条件**: 枯死的植物 + 水（湖水或普通水）
- **效果**: 植物复苏
- **结果**: 玩家获得"生"组件
- **触发**: 播放植物复苏过场动画

#### 9.2.7 StarTabletEffect
- **触发条件**: 石碑 + "生"组件 + "星点"组件
- **效果**: 石碑点亮，天空星星变亮
- **结果**: 关卡完成
- **触发**: 播放过场动画

### 9.3 新收集组件

#### 9.3.1 LifeCollector
- **功能**: 标记"生"组件
- **触发**: 当植物被复活时
- **通知**: 通知Level3Manager获得"生"组件

#### 9.3.2 StarPointCollector
- **功能**: 标记"星点"组件
- **触发**: 当创建了反射表面并反射星光时
- **通知**: 通知Level3Manager获得"星点"组件

### 9.4 新管理器

#### 9.4.1 Level3Manager
- **继承**: LevelManager
- **功能**: 
  - 管理Level3的关卡逻辑
  - 跟踪"生"和"星点"组件的收集状态
  - 处理石碑充能逻辑
  - 触发过场动画
  - 管理关卡完成

### 9.5 资源系统

#### 9.5.1 湖水 (Lake Water)
- **获取方式**: 
  - 凿开结冰的湖面
  - 压裂冰面
- **用途**: 浇灌枯死的植物
- **实现**: 可能需要一个资源管理系统

#### 9.5.2 水 (Water)
- **获取方式**: 
  - 使用凸透镜融化冰雪
- **用途**: 浇灌枯死的植物
- **实现**: 可能需要一个资源管理系统

## 10. 交互系统需求

### 10.1 属性选择系统
- **需求**: 当物体有多个可理解属性时，玩家需要选择其中一个
- **实现**: 
  - 显示属性选择UI
  - 玩家通过数字键选择（1、2、3等）
  - 提示："该物体有多种特性,请选择一种最符合需求的并继续探索吧"

### 10.2 自我赋能系统
- **需求**: 玩家可以将属性赋予自身
- **实现**: 
  - 玩家选择属性后，对自身使用（可能需要特殊操作）
  - 例如：将"重"属性赋予自身，使玩家变重

### 10.3 多重属性赋予系统
- **需求**: 玩家可以同时将多个属性赋予同一个物体
- **实现**: 
  - 例如：将"硬"和"透"同时赋予雪面
  - 需要支持多个属性的组合

### 10.4 资源使用系统
- **需求**: 玩家可以使用获得的资源（水、湖水）
- **实现**: 
  - 玩家获得水/湖水后，可以对着枯死的植物使用
  - 触发植物复活效果

## 11. 关卡设计需求

### 11.1 场景布局
- **环境**: 雪山地带
- **主要区域**: 
  - 石碑区域（中心）
  - 枯死植物区域
  - 结冰湖面区域
  - 冰面区域
  - 可交互物体分布区域
- **光源**: 
  - 天空中的星星
  - 萤火虫（照亮可交互物体）
  - 玩家跟随光源（可选）

### 11.2 关卡难度设计
- **多路径设计**: 提供多种方式获得组件，增加探索性
- **提示系统**: 通过萤火虫和UI提示引导玩家
- **渐进式引导**: 先引导玩家理解属性，再引导玩家应用属性

### 11.3 氛围设计
- **视觉氛围**: 夜晚雪山，星光闪烁，萤火虫飞舞
- **情感氛围**: 希望、复活、探索、哲学思考
- **音效需求**: 
  - 环境音：风声、雪声
  - 交互音：凿冰声、植物复苏声
  - 背景音乐：神秘、希望的氛围音乐

## 12. 测试需求

### 12.1 功能测试
- [ ] 所有属性理解功能正常
- [ ] 所有属性赋予功能正常
- [ ] 所有组合效果正常触发
- [ ] 资源获取和使用正常
- [ ] 组件收集正常
- [ ] 石碑充能正常
- [ ] 关卡完成正常

### 12.2 交互测试
- [ ] 属性选择UI正常显示
- [ ] 多重属性赋予正常
- [ ] 自我赋能正常
- [ ] 资源使用正常

### 12.3 视觉效果测试
- [ ] 萤火虫效果正常
- [ ] 植物复苏动画正常
- [ ] 星光反射效果正常
- [ ] 石碑激活效果正常
- [ ] 天空变亮效果正常

### 12.4 过场动画测试
- [ ] 植物复苏过场动画正常
- [ ] 石碑激活过场动画正常
- [ ] 天空变亮过场动画正常

## 13. 开发优先级

### 13.1 高优先级（核心功能）
1. 新特性枚举添加
2. Level3Manager实现
3. 获得"生"组件的路径1实现（石头硬+冰锥）
4. 获得"星点"组件的路径1实现（石头硬+冰锥透+雪）
5. 石碑激活系统
6. 基础UI文本显示

### 13.2 中优先级（完整功能）
1. 获得"生"组件的其他路径实现
2. 获得"星点"组件的其他路径实现
3. 植物复苏效果
4. 星光反射效果
5. 交互提示UI

### 13.3 低优先级（ polish）
1. 萤火虫效果
2. 过场动画
3. 音效
4. 细节优化

## 14. 注意事项

1. **属性系统扩展**: 需要确保新属性与现有系统兼容
2. **资源管理**: 需要考虑如何管理水/湖水资源
3. **多重属性**: 需要支持同时赋予多个属性
4. **自我赋能**: 需要实现玩家对自身赋予属性的功能
5. **视觉效果**: 星光反射效果可能需要特殊实现
6. **性能优化**: 萤火虫和粒子效果需要注意性能
7. **关卡平衡**: 确保多条路径的难度相对平衡
8. **引导设计**: 确保玩家能够理解如何获得组件

## 15. 后续扩展

1. **更多路径**: 可以添加更多获得组件的方式
2. **更多交互**: 可以添加更多环境交互
3. **更多视觉效果**: 可以添加更多视觉特效
4. **音效系统**: 可以添加完整的音效系统
5. **成就系统**: 可以添加收集成就
6. **难度选择**: 可以添加不同难度模式

